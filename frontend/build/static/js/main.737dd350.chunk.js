(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),o=n(20),i=n.n(o),r=n(9),u=(n(31),n(24)),l=n(2),p=n(4),j=n(3),d=n(25),b=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(a.jsx)(p.b,{children:function(){return!0===n.loggedIn?Object(a.jsx)(t,Object(j.a)({},n)):Object(a.jsx)(p.a,{to:"/login"})}})},h=n.p+"static/media/logo.2e17206c.svg";var m=function(e){var t=e.loggedIn,n=e.email,c=e.onSignOut,s=" ".concat(t?"header__email":"header__email_hidden");return Object(a.jsx)("header",{className:"header",children:Object(a.jsxs)("div",{className:"header__container",children:[Object(a.jsx)("img",{className:"header__logo",src:h,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f"}),Object(a.jsxs)("div",{className:"header__box",children:[Object(a.jsx)("p",{className:s,children:n}),Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/signup",children:Object(a.jsx)(r.b,{to:"/signin",className:"header__link",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(a.jsx)(p.b,{path:"/signin",children:Object(a.jsx)(r.b,{to:"/signup",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(a.jsx)(p.b,{exact:!0,path:"/",children:Object(a.jsx)(r.b,{to:"/signin",className:"header__link",onClick:c,children:"\u0412\u044b\u0439\u0442\u0438"})})]})]})]})})},O=n.p+"static/media/pen.3db4c7ac.svg",_=n.p+"static/media/plus.faab8119.svg",f=s.a.createContext();var A=function(e){var t=e.card,n=e.onCardClick,s=e.onCardDelete,o=e.onCardLike,i=Object(c.useContext)(f),r=t.owner===i._id,u=" ".concat(r?"card__trash":"card__trash_hidden"),l=t.likes.some((function(e){return e===i._id})),p="".concat(l?"card__like_active":"card__like");return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("img",{src:t.link,alt:t.name,className:"card__image",onClick:function(e){return n(t)}}),Object(a.jsx)("button",{type:"button",className:u,onClick:function(e){return s(t)}}),Object(a.jsxs)("div",{className:"card__text-box",children:[Object(a.jsx)("h3",{className:"card__title",children:t.name}),Object(a.jsxs)("div",{className:"card__like-box",children:[Object(a.jsx)("button",{type:"button",className:p,onClick:function(e){return o(t)}}),Object(a.jsx)("p",{className:"card__like-counter",children:t.likes.length})]})]})]})};var x=function(e){var t=e.cards,n=e.onEditProfile,s=e.onAddPlace,o=e.onEditAvatar,i=e.onCardClick,r=e.onCardLike,u=e.onCardDelete,l=Object(c.useContext)(f);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("button",{type:"button",className:"profile__avatar ",onClick:o,style:{backgroundImage:" url(".concat(l.avatar,")")}}),Object(a.jsxs)("div",{className:"profile__text-box",children:[Object(a.jsxs)("div",{className:"profile__name-box",children:[Object(a.jsx)("h1",{className:"profile__name",children:l.name}),Object(a.jsx)("button",{className:"edit-button edit-button_opened",onClick:n,children:Object(a.jsx)("img",{className:"edit-button__img",src:O,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),Object(a.jsx)("p",{className:"profile__about",children:l.about})]}),Object(a.jsx)("button",{className:"add-button add-button_opened",onClick:s,children:Object(a.jsx)("img",{className:"add-button__img",src:_,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]}),Object(a.jsx)("section",{className:"cards","aria-label":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",children:Object(a.jsx)("ul",{className:"cards__list",children:t.map((function(e){return Object(a.jsx)(A,{card:e,onCardClick:i,onCardDelete:u,onCardLike:r},e._id)}))})})]})};var g=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})},v=n.p+"static/media/close-icon.51af9b15.svg";var N=function(e){var t=e.isOpen,n=e.name,c=e.title,s=e.children,o=e.onSubmit,i=e.buttonText,r=e.onClose;return Object(a.jsx)("div",{className:t?"popup popup__".concat(n," popup_opened"):" popup popup__".concat(n),children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{className:"popup__close",children:Object(a.jsx)("img",{className:"popup__close-img",src:v,alt:"\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430",onClick:r})}),Object(a.jsx)("h2",{className:"popup__title",children:c}),Object(a.jsxs)("form",{name:"".concat(n,"form"),className:"popup__form popup__form_".concat(n),onSubmit:o,noValidate:!0,children:[s,Object(a.jsx)("button",{className:"popup__button",type:"submit",children:i})]})]})})};var C=function(e){var t=e.card,n=e.onClose;return Object(a.jsx)("div",{className:t?"popup popup_theme_dark popup_opened  popup_place":"popup",children:Object(a.jsxs)("div",{className:"popup__place-container",children:[Object(a.jsx)("img",{src:t&&t.link,alt:t&&t.name,className:"popup__image"}),Object(a.jsx)("button",{className:"popup__close",children:Object(a.jsx)("img",{className:"popup__close-img",src:v,alt:"\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430",onClick:n})}),Object(a.jsx)("p",{className:"popup__place-title",children:t&&t.name})]})})};var k=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateUser,o=Object(c.useContext)(f),i=Object(c.useState)(""),r=Object(l.a)(i,2),u=r[0],p=r[1],j=Object(c.useState)(""),d=Object(l.a)(j,2),b=d[0],h=d[1];return Object(c.useEffect)((function(){p(o.name),h(o.about)}),[o]),Object(a.jsx)(N,{name:"edit",isOpen:t,title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),s({name:u,about:b})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"text",name:"username",placeholder:"\u0418\u043c\u044f",className:"popup__input  popup__input_type_name",value:u,onChange:function(e){p(e.target.value)},required:!0,minLength:"2",maxLength:"20"}),Object(a.jsx)("span",{className:"popup__error",id:"username-error"})]}),Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"text",name:"about",placeholder:"\u0420\u043e\u0434 \u0437\u0430\u043d\u044f\u0442\u0438\u0439",className:" popup__input popup__input_type_about",value:b,onChange:function(e){h(e.target.value)},required:!0,minLength:"2",maxLength:"200"}),Object(a.jsx)("span",{className:"popup__error",id:"about-error"})]})]}),onClose:n})};var S=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateAvatar,o=Object(c.useState)(""),i=Object(l.a)(o,2),r=i[0],u=i[1],p=Object(c.useRef)();return Object(a.jsx)(N,{name:"update",isOpen:t,title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),s({avatar:p.current.value}),u("")},children:Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"url",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",className:" popup__input popup__input_type_avatar",value:r,ref:p,onChange:function(e){u(e.target.value)},required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"avatar-error"})]})}),onClose:n})};var y=function(e){var t=e.isOpen,n=e.onClose,s=e.onAddPlace,o=Object(c.useState)(""),i=Object(l.a)(o,2),r=i[0],u=i[1],p=Object(c.useState)(""),j=Object(l.a)(p,2),d=j[0],b=j[1];return Object(a.jsx)(N,{name:"add",isOpen:t,title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onSubmit:function(e){e.preventDefault(),s({name:r,link:d}),u(""),b("")},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"text",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_type_cardname",value:r,onChange:function(e){u(e.target.value)},required:!0,minLength:"1",maxLength:"30"}),Object(a.jsx)("span",{className:"popup__error",id:"name-error"})]}),Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:" popup__input popup__input_type_link",value:d,onChange:function(e){b(e.target.value)},required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"link-error"})]})]}),onClose:n})},w=n(11),T=function(e){var t=e.onRegister,n=Object(c.useState)({email:"",password:""}),s=Object(l.a)(n,2),o=s[0],i=s[1],u=function(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(w.a)({},n,a))}))};return Object(a.jsx)("section",{className:"popup popup_theme_sign",children:Object(a.jsxs)("div",{className:"popup__container popup__container_theme_sign",children:[Object(a.jsx)("h2",{className:"popup__title  popup__title_type_sign",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(a.jsxs)("form",{name:"registerform",className:"popup__form popup__form_register",onSubmit:function(e){e.preventDefault(),t(o)},noValidate:!0,children:[Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"email",id:"email",name:"email",className:" popup__input popup__input_type_sign",placeholder:"Email",value:o.email||"",onChange:u,required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"email-error"})]}),Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:" popup__input popup__input_type_sign",value:o.password||"",onChange:u,required:!0,minLength:"4",maxLength:"12"}),Object(a.jsx)("span",{className:"popup__error",id:"password-error"})]}),Object(a.jsx)("button",{className:"popup__button popup__button_theme_sign",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(a.jsxs)("p",{className:"popup__footnote",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(a.jsx)(r.b,{to:"/signin",className:"popup__link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},U=function(e){var t=e.onLogin,n=Object(c.useState)({email:"",password:""}),s=Object(l.a)(n,2),o=s[0],i=s[1],r=function(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(w.a)({},n,a))}))};return Object(a.jsx)("section",{className:"popup popup_theme_sign",children:Object(a.jsxs)("div",{className:"popup__container popup__container_theme_sign",children:[Object(a.jsx)("h2",{className:"popup__title  popup__title_type_sign",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsxs)("form",{name:"loginform",className:"popup__form popup__form_login",onSubmit:function(e){e.preventDefault(),t(o)},noValidate:!0,children:[Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"email",id:"loginemail",name:"email",className:" popup__input popup__input_type_sign",placeholder:"Email",value:o.email||"",onChange:r,required:!0}),Object(a.jsx)("span",{className:"popup__error",id:"loginemail-error"})]}),Object(a.jsxs)("div",{className:"popup__input-field",children:[Object(a.jsx)("input",{type:"password",id:"loginpassword",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:" popup__input popup__input_type_sign",value:o.password||"",onChange:r,required:!0,minLength:"4",maxLength:"12"}),Object(a.jsx)("span",{className:"popup__error",id:"loginpassword-error"})]}),Object(a.jsx)("button",{className:"popup__button popup__button_theme_sign",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})};var L=function(e){var t=e.status,n=e.onClose,c=e.isOpen;return Object(a.jsx)("div",{className:c?" popup popup_opened":"popup",children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{className:"popup__close",children:Object(a.jsx)("img",{className:"popup__close-img",src:v,alt:"\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u044e\u0449\u0430\u044f \u043a\u043d\u043e\u043f\u043a\u0430",onClick:n})}),Object(a.jsx)("img",{className:"popup__union-img",src:"sucess"===t?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAPFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQLyYwAAAAE3RSTlMAIN/vv0BwEIBgMJ/PX6+Qj6BQHC2kXQAABCpJREFUaN7Vm+mSmzAQhGd0S4hj7fd/11gmTldis0IXtek/SdUCn6c1jNBFxbLab5MSQt6TRFSLM9rSWGmziPtHicVoGiNrlLx/K7nMPID65/Fxcl4z7+5y0N4t+EmqK1tv8rehkz94bvBfr0aYdC+s+h2MyQTDXr3C7odV5lTiso+7NXMXrFwL3AtfO7rFcN6xzhbetopnW3Mt10hgC9EukaVpCHeylWY9DRdcGW5saCgWNUHbLf1gR016+r2V/dqYfArUKBaFdod0w2qpWXYtIuvUvIa6yKSGvtEpzela3QEK9+azXLjTLga5gjuefAO3L1lnrpHg9iXLkLmimtv03AFcOBmPC0Oqk4GGSH9XPU2PulH0cNix0jCtjwTjwwa2NEz28Xx15AXTQAWY/a/RjobKfTR7ehhNgxU/mK3HGg2Ifs+siYbr6y1kj4BHysp/QxbIrKFy/4TsMzV6WMjqsJCOCjmf0kNDni5IaZRsdAiM3nCg4K60SK1I44V8MvjvTOOFzkjBaabLZB84+3Ja0XWC10tXp4M77bXs6XSQudqbmlamf3XPjniWJ8bzYq8hpmP1mO9PuWznaNDE/bjHZNSNZQ88dHtDXzKZRhbP10r26nh2ZadPUjrblFuqO5ezH306+bNcxkV2+XSDu4yLi9eU1P4yLtJ6IpX8btVUxH3mVWro0JEbwc28TwKVugfX0lnw42o6IXv8F1XI3WvHSTAfLjLYCO7XOS4lKMC5DmXLc4l6g91RvrLIcNvAHqX/mOuoCLwX7O+Fx0/cyAX4zOuk3rqdRi7e43zAILRwMQ0TUTJzSzmoTS1clMzURZ3/tsC6YZBVXHz7rLjvtN3b31xf0Ze5RJ9ODi8hcWvhpq7YJL/jOX/E/ZNkOfeZVwUfe6w+cUMZEx97Jf2ia+TibRK74b5gEQlCPalI6swQJvNKC679cDDlgzYjG7gYtFUMU1lUczFMxQi9RA7c2ibGCL1IXlRyMdeD2ZAisYq2hom5HnhdqDou5nrg9WWKu9OY2LxIAU5jYvMCYcIWE5uDhdTSf2W4o0u0IZ8uDZkFUuvSkB06hktD5vdtCmr86gDWEd9X3waLP0HU0PUBrCP+nGVcMqPXYvhojlONX6oXh5sTNhqmLRn9s7ZjEK3j3qlw/64HtPHNjp6bfX7iJiMKg7ZV5Z3UozaS3SgjP2brnCeqII/nghx6cbUEN6db7w2husidzbZj7Qb3Ou/WzU8gxLLHrL22Oa+lxhnZGLSOlbvZuWkHvp3S3YrrN+/fHVdgnUS49TvwNy7GItxKaXFPmkLxwRmlqU1+R8eZz54SArYVrU6eKOJEBbaD9Gs+T0xzOID6KVmDgzOdxB4HrdTivA68W8usvZui3P+GU0Jd2UvuaNkB9X89TIfjg8YtKoo9SCHUtHpdHukvu5BrWH2CjagAAAAASUVORK5CYII=":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAS1BMVEUAAAD9Bgb/CAj9Bwf9Bgb+Bwf7Bgb/DAz7Cwv6BQX7CAj+Bwf8CAj+Bwf8Bwf8Bwf/CAj/CAj9Bwf+Bwf/Bgb+Bgb8BQX9Bwf9BwenTdbWAAAAGHRSTlMA7yDfn7+AEDAwQIBgcG+QX0Cvz4/PYFCEaMlPAAAEX0lEQVRo3s2b3XajMAyEZWMwfwkBktTv/6Qb19udc9omwgPO2bnqBfBVY1kOWJZs+fk+ubqqTIiq1noZzrOXsprPSxV+VbWcZykjf65NeCmzXGwB6r/Hr26499Ymd23X34cF/1J9KHuezF9D3f3Jc7vRfQ2Cm4/C1n+DOSvB2LH+CvsYbKKqiZvYa7LmcgjWTL1sVucSeo/hNmEbn3nbVH2ONZ1mJwNsJrqJZHPaEa7zpFnu029Lhrv2O8apikHnJpm/hoca2aVPv695/+0afepYIoLOtLuLN0xedstPWeQ5Du9ZDtE5DvSHbNIlXqtkVaZ7l01cxR1qoC8stzz5A9xjyb1yjQH3WLJplSto7q7nFuDCyfV5YYh1spMi6l9Vz1GpG7sryem5HZMU0xSCsU8H2Esx+cfz618X4IcXVgqqg9nfjW6kqIZfzXYPo6Wwbr+YPZc1GnOq/5lZTorL/Qh5RMAl5c33kCtkVlEN30IelRpdLOT6aSEtEXJuSvvjQ3ZbUnowraj62FCysSDYR8DtBo90sgvDhrlsPFLrtoGrkJNzCjnl0wl/XnRuImtcnXx6pBectipXJSeuTvaPS/yX07X6iwlkhQuy6vWiO93pZHBDs9FrA6e3kVkuJpH5Wz0qkSwyy8XC0KfInRBkgourTxjiPDLHRd1YUuCtEGSaK/ZzcH0aaoJMclM6e5kxiwkyxZVbzK5TNJwik9x0zygDKg1BpriROckS6SQ5m4u0dlJHv1kyx015dcNsyiaHfC7mU4VKTZDBzQY/7hIhyDw31Q6ACTLJlQgFmCc3UhwMcoCu8kawC5BpKXAs2CQXZAKM6URxQS4+j8HlyW0IN5RMgkuQUTLjEsVynckm47fPFMJAchvpOHJciiPdsVwhyUv8mdnHgSa5JDnlVSzYJJclp9qB+URwM8mYTVUyfGS4DBlJjVcYgkuR8QrTx8AJLkPGSxteUwkuQcZrKt7QCS5BxhDjDX07VyFbdRZf8DVE3/gDVyE3qtPBylavG+WpICtcfOvZ6HWjPTWRda7cktP4sKmRlacmss5t4TQ+bGrkRkQhq1x8sMWHTZXcHPBl2YbkLjJ8kLdoQj4h5DfIVkitt4Y8YGF4a8j2Z5tC/a4Nr0rZfWOUmdIIeZUCUvcRrWHzi9/GxSZ+KwVln7Ug1OW36qunOw9XKaYrjFY6Jo7V6VWn0VRuTnXh1Qrob7/ZcVizz//YZCRdobYq3cm+VCPZhygay7TOjSIEuTwX5MOK52zA1fRhUEmOqBumz3Ln6vdj/RU9vGS3Lt+Futrcn6G71+chML3Do9kZ9LzG4T1z04DvwPcu3l1zd5/Np9+WwA4G4fId+FdLYBEupb4KUa7NPjhT713Yx4ReL3brKSFgdwpHaxS2TdT9WBjuQlLlLu0T6N1Fa3Bw5iDZEQet6mW4z61N1lo73we3xmHVTgnx7EU7WqZSec9fHabrpax8fx6Weq1SkFVVu+ne50f6B54MpMzr1U9hAAAAAElFTkSuQmCC",alt:"\u0417\u043d\u0430\u0447\u043e\u043a \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"}),Object(a.jsx)("h2",{className:"popup__union-text",children:"sucess"===t?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})},E=n(22),B=n(23),P="jwt",D=function(e){localStorage.setItem(P,e)},z=function(){return localStorage.getItem(P)},H=function(){localStorage.removeItem(P)},I=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(E.a)(this,e),this.baseUrl=n,this.headers=a}return Object(B.a)(e,[{key:"resFetch",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())})}).then(this.resFetch)}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())})}).then(this.resFetch)}},{key:"addNewCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())}),body:JSON.stringify({name:t,link:n})}).then(this.resFetch)}},{key:"removeCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())})}).then(this.resFetch)}},{key:"editUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())}),body:JSON.stringify({name:t,about:n})}).then(this.resFetch)}},{key:"editAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())}),body:JSON.stringify(e)}).then(this.resFetch)}},{key:"putLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())})}).then(this.resFetch)}},{key:"putDislike",value:function(e){return fetch("".concat(this.baseUrl,"/cards//").concat(e,"/likes/"),{method:"DELETE",headers:Object(j.a)(Object(j.a)({},this.headers),{},{authorization:"Bearer ".concat(z())})}).then(this.resFetch)}}]),e}())({baseUrl:"".concat(window.location.protocol).concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"//localhost:3001"),headers:{"Content-Type":"application/json"}}),R="".concat(window.location.protocol).concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"//localhost:3001");var X=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(!1),i=Object(l.a)(o,2),r=i[0],j=i[1],d=Object(c.useState)(!1),h=Object(l.a)(d,2),O=h[0],_=h[1],A=Object(c.useState)(!1),v=Object(l.a)(A,2),w=v[0],E=v[1],B=Object(c.useState)(!1),P=Object(l.a)(B,2),X=P[0],V=P[1],Z=Object(c.useState)(null),F=Object(l.a)(Z,2),W=F[0],q=F[1],K=Object(c.useState)({}),M=Object(l.a)(K,2),Y=M[0],J=M[1],Q=Object(c.useState)([]),G=Object(l.a)(Q,2),$=G[0],ee=G[1],te=Object(c.useState)(""),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1],se=Object(c.useState)(!1),oe=Object(l.a)(se,2),ie=oe[0],re=oe[1],ue=Object(c.useState)(""),le=Object(l.a)(ue,2),pe=le[0],je=le[1],de=Object(p.g)();function be(){V(!0)}function he(){s(!1),_(!1),j(!1),E(!1),V(!1),q(null)}return Object(c.useEffect)((function(){var e,t=z();t&&(e=t,fetch("".concat(R,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))).then((function(e){e&&(re(!0),je(pe),ce(e),de.push("/"))})).catch((function(e){return console.log(e.status),401===e.status?(H(),console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")):t?500===e.status?(H(),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")):void 0:(H(),console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"))}))}),[]),Object(c.useEffect)((function(){if(ie){var e=z();I.getAppInfo(e).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];J(a),ee(n)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")}))}}),[ie]),Object(a.jsx)(f.Provider,{value:Y,children:Object(a.jsx)("div",{className:"page",children:Object(a.jsxs)("div",{className:"page__container",children:[Object(a.jsx)(m,{email:pe,loggedIn:ie,onSignOut:function(){H(),re(!1),de.push("/signin")}}),Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{path:"/signup",children:Object(a.jsx)(T,{onRegister:function(e){(function(e,t){return fetch("".concat(R,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return e.ok?e.json():Promise.reject(e)}))})(e.email,e.password).then((function(e){400!==e.statusCode&&(ce("sucess"),be(),de.push("/signin"))})).catch((function(e){return console.log(e),400===e.status?(ce("unsucess"),be(),console.log("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")):409===e.status?(ce("unsucess"),be(),console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d")):500===e.status?(ce("unsucess"),be(),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")):void 0}))}})}),Object(a.jsx)(p.b,{path:"/signin",children:Object(a.jsx)(U,{onLogin:function(e){var t=e.email,n=e.password;(function(e,t){return fetch("".concat(R,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){return D(e.jwt),e}))})(t,n).then((function(e){e.token&&(D(e.token),je(t),re(!0),de.push("/"))})).catch((function(e){return console.log(e),400===e.status?console.log("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):401===e.status?console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"):500===e.status?console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430"):void 0}))}})}),Object(a.jsx)(b,{exact:!0,path:"/",loggedIn:ie,cards:$,onEditProfile:function(){s(!0)},onEditAvatar:function(){j(!0)},onAddPlace:function(){_(!0)},onCardClick:function(e){q(e)},onTrashClick:function(){E(!0)},onCardLike:function(e){if(e.likes.some((function(e){return e===Y._id}))){var t=z();I.putDislike(e._id,t).then((function(t){var n=$.map((function(n){return n._id===e._id?t:n}));ee(n)}))}else{var n=z();I.putLike(e._id,n).then((function(t){var n=$.map((function(n){return n._id===e._id?t:n}));ee(n)}))}},onCardDelete:function(e){var t=z();I.removeCard(e._id,t).then((function(){var t=$.filter((function(t){return t._id!==e._id}));ee(t)}))},email:pe,component:x}),Object(a.jsx)(p.b,{path:"/",children:ie?Object(a.jsx)(p.a,{to:"/"}):Object(a.jsx)(p.a,{to:"/signin"})})]}),Object(a.jsx)(p.b,{exact:!0,path:"/",children:Object(a.jsx)(g,{})}),Object(a.jsx)(k,{isOpen:n,onClose:he,onUpdateUser:function(e){var t=e.name,n=e.about,a=z();I.editUserInfo({name:t,about:n},a).then((function(e){J(e),he()}))}}),Object(a.jsx)(S,{isOpen:r,onClose:he,onUpdateAvatar:function(e){var t=z();I.editAvatar(e,t).then((function(e){J(e),he()}))}}),Object(a.jsx)(y,{isOpen:O,onClose:he,onAddPlace:function(e){var t=e.name,n=e.link,a=z();I.addNewCard({name:t,link:n},a).then((function(e){ee([e].concat(Object(u.a)($))),he()}))}}),Object(a.jsx)(N,{name:"confirm",isOpen:w,title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",onClose:he}),Object(a.jsx)(C,{card:W,onClose:he}),Object(a.jsx)(L,{onClose:he,isOpen:X,status:ae})]})})})};i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(r.a,{children:Object(a.jsx)(X,{})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.737dd350.chunk.js.map